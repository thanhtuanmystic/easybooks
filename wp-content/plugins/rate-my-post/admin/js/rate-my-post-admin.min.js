!function($,t){"use strict";
/*!
  Waypoints - 4.0.1
  Copyright Â© 2011-2016 Caleb Troughton
  Licensed under the MIT license.
  https://github.com/imakewebthings/waypoints/blob/master/licenses.txt
  */!function(){function t(i){if(!i)throw new Error("No options passed to Waypoint constructor");if(!i.element)throw new Error("No element option passed to Waypoint constructor");if(!i.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+s,this.options=t.Adapter.extend({},t.defaults,i),this.element=this.options.element,this.adapter=new t.Adapter(this.element),this.callback=i.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=t.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=t.Context.findOrCreateByElement(this.options.context),t.offsetAliases[this.options.offset]&&(this.options.offset=t.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),e[this.key]=this,s+=1}var s=0,e={};t.prototype.queueTrigger=function(t){this.group.queueTrigger(this,t)},t.prototype.trigger=function(t){this.enabled&&this.callback&&this.callback.apply(this,t)},t.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete e[this.key]},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},t.prototype.next=function(){return this.group.next(this)},t.prototype.previous=function(){return this.group.previous(this)},t.invokeAll=function(t){var s=[];for(var i in e)s.push(e[i]);for(var a=0,n=s.length;n>a;a++)s[a][t]()},t.destroyAll=function(){t.invokeAll("destroy")},t.disableAll=function(){t.invokeAll("disable")},t.enableAll=function(){for(var s in t.Context.refreshAll(),e)e[s].enabled=!0;return this},t.refreshAll=function(){t.Context.refreshAll()},t.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},t.viewportWidth=function(){return document.documentElement.clientWidth},t.adapters=[],t.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},t.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=t}(),function(){function t(t){window.setTimeout(t,1e3/60)}function s(t){this.element=t,this.Adapter=a.Adapter,this.adapter=new this.Adapter(t),this.key="waypoint-context-"+e,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},t.waypointContextKey=this.key,i[t.waypointContextKey]=this,e+=1,a.windowContext||(a.windowContext=!0,a.windowContext=new s(window)),this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var e=0,i={},a=window.Waypoint,n=window.onload;s.prototype.add=function(t){var s=t.options.horizontal?"horizontal":"vertical";this.waypoints[s][t.key]=t,this.refresh()},s.prototype.checkEmpty=function(){var t=this.Adapter.isEmptyObject(this.waypoints.horizontal),s=this.Adapter.isEmptyObject(this.waypoints.vertical),e=this.element==this.element.window;t&&s&&!e&&(this.adapter.off(".waypoints"),delete i[this.key])},s.prototype.createThrottledResizeHandler=function(){function t(){s.handleResize(),s.didResize=!1}var s=this;this.adapter.on("resize.waypoints",(function(){s.didResize||(s.didResize=!0,a.requestAnimationFrame(t))}))},s.prototype.createThrottledScrollHandler=function(){function t(){s.handleScroll(),s.didScroll=!1}var s=this;this.adapter.on("scroll.waypoints",(function(){(!s.didScroll||a.isTouch)&&(s.didScroll=!0,a.requestAnimationFrame(t))}))},s.prototype.handleResize=function(){a.Context.refreshAll()},s.prototype.handleScroll=function(){var t={},s={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var e in s){var i=s[e],a=i.newScroll>i.oldScroll?i.forward:i.backward;for(var n in this.waypoints[e]){var r=this.waypoints[e][n];if(null!==r.triggerPoint){var o=i.oldScroll<r.triggerPoint,l=i.newScroll>=r.triggerPoint;(o&&l||!o&&!l)&&(r.queueTrigger(a),t[r.group.id]=r.group)}}}for(var h in t)t[h].flushTriggers();this.oldScroll={x:s.horizontal.newScroll,y:s.vertical.newScroll}},s.prototype.innerHeight=function(){return this.element==this.element.window?a.viewportHeight():this.adapter.innerHeight()},s.prototype.remove=function(t){delete this.waypoints[t.axis][t.key],this.checkEmpty()},s.prototype.innerWidth=function(){return this.element==this.element.window?a.viewportWidth():this.adapter.innerWidth()},s.prototype.destroy=function(){var t=[];for(var s in this.waypoints)for(var e in this.waypoints[s])t.push(this.waypoints[s][e]);for(var i=0,a=t.length;a>i;i++)t[i].destroy()},s.prototype.refresh=function(){var t,s=this.element==this.element.window,e=s?void 0:this.adapter.offset(),i={};for(var n in this.handleScroll(),t={horizontal:{contextOffset:s?0:e.left,contextScroll:s?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:s?0:e.top,contextScroll:s?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}}){var r=t[n];for(var o in this.waypoints[n]){var l,h,c,d,m=this.waypoints[n][o],p=m.options.offset,u=m.triggerPoint,g=0,v=null==u;m.element!==m.element.window&&(g=m.adapter.offset()[r.offsetProp]),"function"==typeof p?p=p.apply(m):"string"==typeof p&&(p=parseFloat(p),m.options.offset.indexOf("%")>-1&&(p=Math.ceil(r.contextDimension*p/100))),l=r.contextScroll-r.contextOffset,m.triggerPoint=Math.floor(g+l-p),h=u<r.oldScroll,c=m.triggerPoint>=r.oldScroll,d=!h&&!c,!v&&(h&&c)?(m.queueTrigger(r.backward),i[m.group.id]=m.group):(!v&&d||v&&r.oldScroll>=m.triggerPoint)&&(m.queueTrigger(r.forward),i[m.group.id]=m.group)}}return a.requestAnimationFrame((function(){for(var t in i)i[t].flushTriggers()})),this},s.findOrCreateByElement=function(t){return s.findByElement(t)||new s(t)},s.refreshAll=function(){for(var t in i)i[t].refresh()},s.findByElement=function(t){return i[t.waypointContextKey]},window.onload=function(){n&&n(),s.refreshAll()},a.requestAnimationFrame=function(s){(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||t).call(window,s)},a.Context=s}(),function(){function t(t,s){return t.triggerPoint-s.triggerPoint}function s(t,s){return s.triggerPoint-t.triggerPoint}function e(t){this.name=t.name,this.axis=t.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),i[this.axis][this.name]=this}var i={vertical:{},horizontal:{}},a=window.Waypoint;e.prototype.add=function(t){this.waypoints.push(t)},e.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},e.prototype.flushTriggers=function(){for(var e in this.triggerQueues){var i=this.triggerQueues[e],a="up"===e||"left"===e;i.sort(a?s:t);for(var n=0,r=i.length;r>n;n+=1){var o=i[n];(o.options.continuous||n===i.length-1)&&o.trigger([e])}}this.clearTriggerQueues()},e.prototype.next=function(s){this.waypoints.sort(t);var e=a.Adapter.inArray(s,this.waypoints);return e===this.waypoints.length-1?null:this.waypoints[e+1]},e.prototype.previous=function(s){this.waypoints.sort(t);var e=a.Adapter.inArray(s,this.waypoints);return e?this.waypoints[e-1]:null},e.prototype.queueTrigger=function(t,s){this.triggerQueues[s].push(t)},e.prototype.remove=function(t){var s=a.Adapter.inArray(t,this.waypoints);s>-1&&this.waypoints.splice(s,1)},e.prototype.first=function(){return this.waypoints[0]},e.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},e.findOrCreate=function(t){return i[t.axis][t.name]||new e(t)},a.Group=e}(),function(){function t(t){return t===t.window}function s(s){return t(s)?s:s.defaultView}function e(t){this.element=t,this.handlers={}}var i=window.Waypoint;e.prototype.innerHeight=function(){return t(this.element)?this.element.innerHeight:this.element.clientHeight},e.prototype.innerWidth=function(){return t(this.element)?this.element.innerWidth:this.element.clientWidth},e.prototype.off=function(t,s){function e(t,s,e){for(var i=0,a=s.length-1;a>i;i++){var n=s[i];e&&e!==n||t.removeEventListener(n)}}var i=t.split("."),a=i[0],n=i[1],r=this.element;if(n&&this.handlers[n]&&a)e(r,this.handlers[n][a],s),this.handlers[n][a]=[];else if(a)for(var o in this.handlers)e(r,this.handlers[o][a]||[],s),this.handlers[o][a]=[];else if(n&&this.handlers[n]){for(var l in this.handlers[n])e(r,this.handlers[n][l],s);this.handlers[n]={}}},e.prototype.offset=function(){if(!this.element.ownerDocument)return null;var t=this.element.ownerDocument.documentElement,e=s(this.element.ownerDocument),i={top:0,left:0};return this.element.getBoundingClientRect&&(i=this.element.getBoundingClientRect()),{top:i.top+e.pageYOffset-t.clientTop,left:i.left+e.pageXOffset-t.clientLeft}},e.prototype.on=function(t,s){var e=t.split("."),i=e[0],a=e[1]||"__default",n=this.handlers[a]=this.handlers[a]||{};(n[i]=n[i]||[]).push(s),this.element.addEventListener(i,s)},e.prototype.outerHeight=function(s){var e,i=this.innerHeight();return s&&!t(this.element)&&(e=window.getComputedStyle(this.element),i+=parseInt(e.marginTop,10),i+=parseInt(e.marginBottom,10)),i},e.prototype.outerWidth=function(s){var e,i=this.innerWidth();return s&&!t(this.element)&&(e=window.getComputedStyle(this.element),i+=parseInt(e.marginLeft,10),i+=parseInt(e.marginRight,10)),i},e.prototype.scrollLeft=function(){var t=s(this.element);return t?t.pageXOffset:this.element.scrollLeft},e.prototype.scrollTop=function(){var t=s(this.element);return t?t.pageYOffset:this.element.scrollTop},e.extend=function(){function t(t,s){if("object"==typeof t&&"object"==typeof s)for(var e in s)s.hasOwnProperty(e)&&(t[e]=s[e]);return t}for(var s=Array.prototype.slice.call(arguments),e=1,i=s.length;i>e;e++)t(s[0],s[e]);return s[0]},e.inArray=function(t,s,e){return null==s?-1:s.indexOf(t,e)},e.isEmptyObject=function(t){for(var s in t)return!1;return!0},i.adapters.push({name:"noframework",Adapter:e}),i.Adapter=e}();class s{constructor(){this.tabs=$(".js-rmp-tab"),this.tabContents=$(".js-rmp-tab-content"),this.events()}events(){this.tabs.on("click",(t=>this.tabClicked()))}tabClicked(){let t=$(event.currentTarget).data("tab"),s=$(".js-rmp-tab-content--"+t);$(this.tabs).removeClass("nav-tab-active"),$(this.tabContents).removeClass("rmp-tab-content--visible"),$(event.currentTarget).addClass("nav-tab-active"),$(s).addClass("rmp-tab-content--visible"),Waypoint.refreshAll()}}class e{constructor(s,e,i,a,n,r){this.saveButton=$(s),this.options=$(e),this.optionsAction=i,this.statusMsg=$(a),this.savingString=t.save,this.msgSuccessClass="rmp-tab-content__action-msg--success",this.msgAlertClass="rmp-tab-content__action-msg--alert",this.btnSuccessClass="rmp-btn--success",this.btnAlertClass="rmp-btn--alert",this.btnProcessingClass="rmp-btn--processing",this.ajaxUrl=t.admin_ajax,this.resetConfirm=t.resetConfirm,this.resetButton=$(n),this.resetAction=r,this.data={nonce:t.nonce},this.events()}events(){this.saveButton.on("click",(t=>this.gatherOptions())),this.resetButton.on("click",(t=>this.resetOptions()))}gatherOptions(){this.data.action=this.optionsAction,$(this.options).each(((t,s)=>{let e=$(s).attr("data-key"),i=!1;i=$(s).is(":checkbox")?$(s).is(":checked")?"2":"1":$(s).val(),this.data[e]=i})),this.saveOptions(this.data)}saveOptions(t){this.statusMsg.removeClass(this.msgAlertClass),this.statusMsg.removeClass(this.msgSuccessClass),this.saveButton.removeClass(this.btnProcessingClass),this.saveButton.removeClass(this.btnSuccessClass),this.saveButton.removeClass(this.btnAlertClass),this.statusMsg.text(this.savingString),this.saveButton.addClass(this.btnProcessingClass),$.ajax({type:"POST",url:this.ajaxUrl,data:t,dataType:"JSON",success:t=>{this.afterSave(t)}})}afterSave(t){if(t.errorMsg.length)return this.statusMsg.addClass(this.msgAlertClass),this.saveButton.addClass(this.btnAlertClass),void this.statusMsg.html(t.errorMsg.join("<br />"));this.statusMsg.addClass(this.msgSuccessClass),this.saveButton.addClass(this.btnSuccessClass),this.statusMsg.text(t.successMsg),setTimeout((()=>{this.saveButton.removeClass(this.btnProcessingClass),this.saveButton.removeClass(this.btnSuccessClass),this.saveButton.removeClass(this.btnAlertClass)}),2e3)}resetOptions(){confirm(this.resetConfirm)&&(this.statusMsg.removeClass(this.msgAlertClass),this.statusMsg.removeClass(this.msgSuccessClass),this.resetButton.removeClass(this.btnProcessingClass),this.resetButton.removeClass(this.btnSuccessClass),this.resetButton.removeClass(this.btnAlertClass),this.statusMsg.text(this.savingString),this.resetButton.addClass(this.btnProcessingClass),this.data.action=this.resetAction,$.ajax({type:"POST",url:this.ajaxUrl,data:this.data,dataType:"JSON",success:t=>{this.afterReset(t)}}))}afterReset(t){if(t.errorMsg.length)return this.statusMsg.addClass(this.msgAlertClass),this.resetButton.addClass(this.btnAlertClass),void this.statusMsg.html(t.errorMsg.join("<br />"));this.statusMsg.addClass(this.msgSuccessClass),this.resetButton.addClass(this.btnSuccessClass),this.statusMsg.text(t.successMsg),setTimeout((()=>location.reload()),1e3)}}class i{constructor(){this.migrateButton=$(".js-rmp-migrate"),this.migrateMsg=$(".js-rmp-migration-msg"),this.ajaxUrl=t.admin_ajax,this.btnSuccessClass="rmp-btn--success",this.btnAlertClass="rmp-btn--alert",this.btnProcessingClass="rmp-btn--processing",this.data={nonce:t.nonce,action:"migrate_data"},this.events()}events(){this.migrateButton.on("click",(t=>this.migrate()))}migrate(){this.migrateButton.removeClass(this.btnProcessingClass),this.migrateButton.removeClass(this.btnSuccessClass),this.migrateButton.removeClass(this.btnAlertClass),this.migrateButton.addClass(this.btnProcessingClass),$.ajax({type:"POST",url:this.ajaxUrl,data:this.data,dataType:"JSON",success:t=>{this.afterMigration(t),console.log(t)}})}afterMigration(t){if(console.log(t),t.errorMsg.length)return this.migrateButton.addClass(this.btnAlertClass),void this.migrateMsg.html(t.errorMsg.join("<br />"));this.migrateButton.addClass(this.btnSuccessClass),this.migrateMsg.text(t.successMsg)}}class a{constructor(){this.cptRating=$(".js-rmp-cpt-rating"),this.cptResults=$(".js-rmp-cpt-results"),this.cptRatingInput=$(".js-rmp-cpt-rating-input"),this.cptResultsInput=$(".js-rmp-cpt-results-input"),this.events()}events(){this.cptRating.on("click",(t=>this.populateRatingInput())),this.cptResults.on("click",(t=>this.populateResultsInput()))}populateRatingInput(){let t=this.cptRating.text().trim();this.cptRatingInput.val(t)}populateResultsInput(){let t=this.cptResults.text().trim();this.cptResultsInput.val(t)}}class n{constructor(){this.socialFollowDependencies=$(".js-rmp-social-share, .js-rmp-social-follow"),this.socialFollowCb=$(".js-rmp-social-follow"),this.socialShareCb=$(".js-rmp-social-share"),this.socialFollowTable=$(".js-rmp-social-follow-links"),this.multilingualCb=$(".js-rmp-multilingual"),this.multilingualDisable=$(".js-rmp-no-multilingual .js-rmp-customization"),this.ipTracking=$(".js-rmp-track-ip"),this.ipDoubleVotes=$(".js-rmp-ip-double-vote"),this.events()}events(){this.socialFollowDependencies.change((t=>this.handleSocialFollowDependencies())),this.handleSocialFollowDependencies(),this.multilingualCb.change((t=>this.handleMultilingualDependencies())),this.handleMultilingualDependencies(),this.ipTracking.change((t=>this.handleIpTrackingDependencies())),this.handleIpTrackingDependencies()}handleSocialFollowDependencies(){this.socialFollowCb.is(":checked")&&!this.socialShareCb.is(":checked")?this.socialFollowTable.removeClass("rmp-tab-content__table--hidden"):this.socialFollowTable.addClass("rmp-tab-content__table--hidden")}handleMultilingualDependencies(){this.multilingualCb.is(":checked")?(this.multilingualDisable.prop("disabled",!0),this.multilingualDisable.attr("disabled","disabled")):(this.multilingualDisable.prop("disabled",!1),this.multilingualDisable.removeAttr("disabled"))}handleIpTrackingDependencies(){1==this.ipTracking.val()?(this.ipDoubleVotes.prop("disabled",!0),this.ipDoubleVotes.attr("disabled","disabled"),this.ipDoubleVotes.val("1")):(this.ipDoubleVotes.prop("disabled",!1),this.ipDoubleVotes.removeAttr("disabled"))}}class r{constructor(){this.updateBtn=$(".js-rmp-mb-update"),this.resetBtn=$(".js-rmp-mb-reset"),this.voteCount=$(".js-rmp-mb-vote-count"),this.avgRating=$(".js-rmp-mb-avg"),this.currentVoteCount=this.voteCount.val(),this.currentAvgRating=this.avgRating.val(),this.msg=$(".js-rmp-mb-msg"),this.postID=t.postID,this.ajaxUrl=t.admin_ajax,this.updateAction="update_results",this.resetAction="reset_results",this.data={nonce:t.nonce},this.events()}events(){this.updateBtn.on("click",(t=>this.updateRating())),this.resetBtn.on("click",(t=>this.resetRating()))}updateRating(){this.resetDataObject(),this.removeStatusIndicators(),this.updateBtn.addClass("rmp-btn--processing"),this.data.action=this.updateAction,this.data.votes=this.voteCount.val(),this.data.avg=this.avgRating.val(),this.data.postID=t.postID,$.ajax({type:"POST",url:this.ajaxUrl,data:this.data,dataType:"JSON",success:t=>{this.afterUpdate(t,this.voteCount.val(),this.avgRating.val())}})}afterUpdate(t,s,e){if(t.errorMsg.length)return this.msg.addClass("rmp-meta-box__action-msg--alert"),this.updateBtn.addClass("rmp-btn--alert"),this.msg.html(t.errorMsg.join("<br />")),this.voteCount.val(this.currentVoteCount),this.avgRating.val(this.currentAvgRating),void setTimeout((()=>{this.removeStatusIndicators()}),2e3);this.currentAvgRating=e,this.currentVoteCount=s,this.msg.addClass("rmp-meta-box__action-msg--success"),this.updateBtn.addClass("rmp-btn--success"),this.msg.text(t.successMsg),setTimeout((()=>{this.removeStatusIndicators()}),2e3)}removeStatusIndicators(){this.updateBtn.removeClass("rmp-btn--success rmp-btn--alert rmp-btn--processing"),this.resetBtn.removeClass("rmp-btn--success rmp-btn--alert rmp-btn--processing"),this.msg.removeClass("rmp-meta-box__action-msg--success rmp-meta-box__action-msg--alert"),this.msg.html("")}resetRating(){this.resetDataObject(),this.removeStatusIndicators(),this.resetBtn.addClass("rmp-btn--processing"),this.data.action=this.resetAction,this.data.postID=t.postID,$.ajax({type:"POST",url:this.ajaxUrl,data:this.data,dataType:"JSON",success:t=>{this.afterReset(t)}})}afterReset(t){if(t.errorMsg.length)return this.msg.addClass("rmp-meta-box__action-msg--alert"),this.resetBtn.addClass("rmp-btn--alert"),this.msg.html(t.errorMsg.join("<br />")),void setTimeout((()=>{this.removeStatusIndicators()}),2e3);this.msg.addClass("rmp-meta-box__action-msg--success"),this.resetBtn.addClass("rmp-btn--success"),this.msg.text(t.successMsg),setTimeout((()=>{this.removeStatusIndicators()}),2e3),this.voteCount.val("0"),this.avgRating.val("0")}resetDataObject(){this.data={nonce:t.nonce}}}class o{constructor(){this.deleteItem=$(".rmp-js-ind-delete-feedback"),this.deleteBtn=$(".js-rmp-mb-delete-feedback"),this.msg=$(".js-rmp-mb-feedback-msg"),this.feedbackTable=$(".js-rmp-feedback-table"),this.postID=t.postID,this.ajaxUrl=t.admin_ajax,this.indDeleteAction="individually_delete_feedback",this.allDeleteAction="delete_feedback",this.data={nonce:t.nonce},this.events()}events(){this.deleteItem.on("click",(t=>this.indDeleteFeedback())),this.deleteBtn.on("click",(t=>this.deleteAllFeedback()))}indDeleteFeedback(){this.resetDataObject();let s=$(event.currentTarget).attr("data-id");s?(this.data.action=this.indDeleteAction,this.data.postID=t.postID,this.data.feedbackID=s,$.ajax({type:"POST",url:this.ajaxUrl,data:this.data,dataType:"JSON",success:t=>{this.afterIndDeleteFeedback(t)}})):alert("Feedback submitted before version 2.7 cannot be deleted individually! You can delete all feedback by pressing delete feedback button at the bottom.")}afterIndDeleteFeedback(t){if(t.errorMsg.length)return void alert(t.errorMsg.join("<br />"));$(".js-rmp-feedback--"+t.feedbackID).remove()}deleteAllFeedback(){this.resetDataObject(),this.removeStatusIndicators(),this.deleteBtn.addClass("rmp-btn--processing"),this.data.action=this.allDeleteAction,this.data.postID=t.postID,$.ajax({type:"POST",url:this.ajaxUrl,data:this.data,dataType:"JSON",success:t=>{this.afterAllDeleteFeedback(t)}})}afterAllDeleteFeedback(t){if(t.errorMsg.length)return this.msg.addClass("rmp-meta-box__feedback__msg--alert"),this.deleteBtn.addClass("rmp-btn--alert"),this.msg.html(t.errorMsg.join("<br />")),void setTimeout((()=>{this.removeStatusIndicators()}),2e3);this.msg.addClass("rmp-meta-box__feedback__msg--success"),this.deleteBtn.addClass("rmp-btn--success"),this.msg.text(t.successMsg),setTimeout((()=>{this.removeStatusIndicators(),this.deleteBtn.remove(),this.feedbackTable.remove()}),2e3)}removeStatusIndicators(){this.msg.removeClass("rmp-meta-box__feedback__msg--alert rmp-meta-box__feedback__msg--success"),this.msg.html(""),this.deleteBtn.removeClass("rmp-btn--alert rmp-btn--success rmp-btn--processing")}resetDataObject(){this.data={nonce:t.nonce}}}class l{constructor(t,s){this.trigger=document.getElementById(t),this.target=$(s),this.events()}events(){new Waypoint({element:this.trigger,handler:t=>{"down"==t?this.target.addClass("rmp-tab-content__sticky-save--hidden"):this.target.removeClass("rmp-tab-content__sticky-save--hidden")},offset:"bottom-in-view"})}}class h{constructor(){this.shortcode=$(".js-rmp-crw-shortcode"),this.events()}events(){this.shortcode.on("click",(t=>this.copyText()))}copyText(){let t=$(event.currentTarget).text();this.copyToClipboard(t)}copyToClipboard(t){let s=document.createElement("textarea");document.body.appendChild(s),s.value=t,s.select(),document.execCommand("copy"),document.body.removeChild(s)}}class c{constructor(){this.updateBtn=$(".js-rmp-mb-schema-btn"),this.msg=$(".js-rmp-mb-schema-msg"),this.schemaSelect=$(".js-rmp-schema-select"),this.postID=t.postID,this.ajaxUrl=t.admin_ajax,this.updateAction="update_schema",this.data={nonce:t.nonce},this.events()}events(){this.updateBtn.on("click",(t=>this.updateSchema()))}updateSchema(){this.resetDataObject(),this.removeStatusIndicators(),this.updateBtn.addClass("rmp-btn--processing"),this.data.action=this.updateAction,this.data.postID=t.postID;let s=this.schemaSelect.find(":selected").val(),e=this.getSchemaData(s),i={};i.type=s,i.details=e,this.data.schema=i,$.ajax({type:"POST",url:this.ajaxUrl,data:this.data,dataType:"JSON",success:t=>{this.afterUpdate(t)}})}getSchemaData(t){let s=".js-rmp-schema-"+t.toLowerCase();if($(s).length){let t={};$(s+" .js-rmp-schema-field").each(((s,e)=>{let i=$(e).attr("data-schema-key-parent"),a=$(e).attr("data-schema-key"),n=$(e).children("input").val();void 0===i&&(t[a]=n)}));let e=$(s+" .js-rmp-schema-complex");return e.length&&e.each(((s,e)=>{let i=$(e).attr("data-schema-key-has-children"),a=$(e).children(".js-rmp-single-from-complex"),n=[];a.each(((t,s)=>{let e={};"array"===$(s).attr("data-schema-structure")&&(e=[]),$(s).children(".js-rmp-schema-field").each(((t,s)=>{let i=$(s).attr("data-schema-key"),a=$(s).children("input").val();Array.isArray(e)?e.push(a):e[i]=a})),n.push(e)})),t[i]=n})),t}return!1}afterUpdate(t){if(t.errorMsg.length)return this.msg.addClass("rmp-customize-mb__schema__msg--alert"),this.updateBtn.addClass("rmp-btn--alert"),this.msg.html(t.errorMsg.join("<br />")),void setTimeout((()=>{this.removeStatusIndicators()}),2e3);this.msg.addClass("rmp-customize-mb__schema__msg--success"),this.updateBtn.addClass("rmp-btn--success"),this.msg.text(t.successMsg),setTimeout((()=>{this.removeStatusIndicators()}),2e3)}removeStatusIndicators(){this.updateBtn.removeClass("rmp-btn--success rmp-btn--alert rmp-btn--processing"),this.msg.removeClass("rmp-customize-mb__schema__msg--alert rmp-customize-mb__schema__msg--success"),this.msg.html("")}resetDataObject(){this.data={nonce:t.nonce}}}class d{constructor(){this.addBtn=$(".js-rmp-schema-field-add-repeater"),this.removeBtn=$(".js-rmp-schema-field-remove-repeater"),this.removeBtnClass=".js-rmp-schema-field-remove-repeater",this.events()}events(){this.addBtn.on("click",(t=>this.addRepeater())),this.removeBtn.on("click",(t=>this.removeRepeater())),this.adjustRemoveBtn()}addRepeater(){let t=$(event.currentTarget).parent().siblings(".js-rmp-single-from-complex").last();t.clone().find("input:text").val("").end().insertAfter(t);let s=$(this.removeBtnClass);s.off(),s.on("click",(t=>this.removeRepeater())),this.adjustRemoveBtn()}removeRepeater(){let t=$(event.currentTarget).closest(".js-rmp-single-from-complex");t.siblings().length>1&&t.remove(),this.adjustRemoveBtn()}adjustRemoveBtn(){$(this.removeBtnClass).each(((t,s)=>{$(s).removeClass("rmp-schema-multiple-container__remove__btn--disabled"),$(s).closest(".js-rmp-single-from-complex").siblings().length<2&&$(s).addClass("rmp-schema-multiple-container__remove__btn--disabled")}))}}class m{constructor(){this.selectEl=$(".js-rmp-schema-select"),this.allSchemaTypes=$(".js-rmp-schema-type"),this.events()}events(){this.selectEl.on("change",(t=>this.showSchemaField()))}showSchemaField(){this.allSchemaTypes.removeClass("rmp-customize-mb__schema__schema-field--selected");let t=$(event.currentTarget).val(),s=$(".js-rmp-schema-"+t.toLowerCase());s.length&&s.addClass("rmp-customize-mb__schema__schema-field--selected")}}class p{constructor(){this.updateBtn=$(".js-rmp-mb-strings-btn"),this.msg=$(".js-rmp-strings-msg"),this.inputs=$(".js-rmp-custom-string"),this.postID=t.postID,this.ajaxUrl=t.admin_ajax,this.updateAction="update_custom_strings",this.data={nonce:t.nonce},this.events()}events(){this.updateBtn.on("click",(t=>this.updateStrings()))}updateStrings(){this.resetDataObject(),this.removeStatusIndicators(),this.updateBtn.addClass("rmp-btn--processing"),this.data.action=this.updateAction,this.data.postID=t.postID;let s={};this.inputs.each(((t,e)=>{let i=$(e).attr("data-custom-string-key"),a=$(e).val();a.replace(/\s/g,"").length>0&&(s[i]=a)})),jQuery.isEmptyObject(s)&&(s.hasStrings=!1),this.data.strings=s,console.log(this.data),$.ajax({type:"POST",url:this.ajaxUrl,data:this.data,dataType:"JSON",success:t=>{this.afterUpdate(t)}})}afterUpdate(t){if(t.errorMsg.length)return this.msg.addClass("rmp-customize-mb__strings__msg--alert"),this.updateBtn.addClass("rmp-btn--alert"),this.msg.html(t.errorMsg.join("<br />")),void setTimeout((()=>{this.removeStatusIndicators()}),2e3);this.msg.addClass("rmp-customize-mb__strings__msg--success"),this.updateBtn.addClass("rmp-btn--success"),this.msg.text(t.successMsg),setTimeout((()=>{this.removeStatusIndicators()}),2e3)}removeStatusIndicators(){this.updateBtn.removeClass("rmp-btn--success rmp-btn--alert rmp-btn--processing"),this.msg.removeClass("rmp-customize-mb__strings__msg--alert rmp-customize-mb__strings__msg--success"),this.msg.html("")}resetDataObject(){this.data={nonce:t.nonce}}}class u{constructor(){this.updateBtn=$(".js-rmp-mb-style-btn"),this.msg=$(".js-rmp-style-msg"),this.input=$(".js-rmp-class-input"),this.postID=t.postID,this.ajaxUrl=t.admin_ajax,this.updateAction="update_custom_class",this.data={nonce:t.nonce},this.events()}events(){this.updateBtn.on("click",(t=>this.updateClass()))}updateClass(){this.resetDataObject(),this.removeStatusIndicators(),this.updateBtn.addClass("rmp-btn--processing"),this.data.action=this.updateAction,this.data.postID=t.postID;let s=this.input.val();s||(s=""),this.data.class=s,$.ajax({type:"POST",url:this.ajaxUrl,data:this.data,dataType:"JSON",success:t=>{this.afterUpdate(t)}})}afterUpdate(t){if(t.errorMsg.length)return this.msg.addClass("rmp-customize-mb__style__msg--alert"),this.updateBtn.addClass("rmp-btn--alert"),this.msg.html(t.errorMsg.join("<br />")),void setTimeout((()=>{this.removeStatusIndicators()}),2e3);this.msg.addClass("rmp-customize-mb__style__msg--success"),this.updateBtn.addClass("rmp-btn--success"),this.msg.text(t.successMsg),setTimeout((()=>{this.removeStatusIndicators()}),2e3)}removeStatusIndicators(){this.updateBtn.removeClass("rmp-btn--success rmp-btn--alert rmp-btn--processing"),this.msg.removeClass("rmp-customize-mb__style__msg--alert rmp-customize-mb__style__msg--success"),this.msg.html("")}resetDataObject(){this.data={nonce:t.nonce}}}class g{constructor(){this.tabs=$(".js-rmp-customize-mb-tab"),this.tabContent=$(".js-rmp-customize-mb-schema-container, .js-rmp-customize-mb-style-container, .js-rmp-customize-mb-strings-container"),this.events()}events(){this.tabs.on("click",(t=>this.switchTab()))}switchTab(){this.tabs.removeClass("rmp-customize-mb__tabs__tab--selected"),this.tabContent.removeClass("rmp-customize-mb__schema--visible"),$(event.currentTarget).addClass("rmp-customize-mb__tabs__tab--selected");let t="."+$(event.currentTarget).attr("data-tab-class");$(t).addClass("rmp-customize-mb__schema--visible")}}class v{constructor(){this.wipeBtn=$(".js-rmp-delete-data"),this.wipeMsg=$(".js-rmp-delete-data-msg"),this.ajaxUrl=t.admin_ajax,this.btnSuccessClass="rmp-btn--success",this.btnAlertClass="rmp-btn--alert",this.btnProcessingClass="rmp-btn--processing",this.data={nonce:t.nonce,action:"wipe_data"},this.events()}events(){this.wipeBtn.on("click",(t=>this.wipe()))}wipe(){confirm("All votes, feedback and analytics will be permanently lost! Proceed?")&&(this.wipeBtn.removeClass(this.btnProcessingClass),this.wipeBtn.removeClass(this.btnSuccessClass),this.wipeBtn.removeClass(this.btnAlertClass),this.wipeBtn.addClass(this.btnProcessingClass),$.ajax({type:"POST",url:this.ajaxUrl,data:this.data,dataType:"JSON",success:t=>{this.afterMigration(t),console.log(t)}}))}afterMigration(t){if(console.log(t),t.errorMsg.length)return this.wipeBtn.addClass(this.btnAlertClass),void this.wipeMsg.html(t.errorMsg.join("<br />"));this.wipeBtn.addClass(this.btnSuccessClass),this.wipeMsg.text(t.successMsg)}}class b{constructor(){this.closeBtnClass=".js-rmp-admin-notice .notice-dismiss",this.ajaxUrl=t.admin_ajax,this.data={nonce:t.nonce,action:"rmp_dismiss_notice"},this.events()}events(){$(document).on("click",this.closeBtnClass,(t=>this.removeNotice()))}removeNotice(){let t=$(event.target).parent(".js-rmp-admin-notice").attr("data-admin-notice-key");this.data.noticeKey=t,$.ajax({type:"POST",url:this.ajaxUrl,data:this.data,dataType:"JSON",success:t=>{console.log(t)}})}}class f{constructor(){this.saveBtn=$(".js-rmp-license-btn"),this.msg=$(".js-rmp-license-msg"),this.input=$(".js-rmp-license"),this.ajaxUrl=t.admin_ajax,this.updateAction="rmp_verify_license",this.msgSuccessClass="rmp-tab-content__action-msg--success",this.msgAlertClass="rmp-tab-content__action-msg--alert",this.btnSuccessClass="rmp-btn--success",this.btnAlertClass="rmp-btn--alert",this.btnProcessingClass="rmp-btn--processing",this.data={nonce:t.nonce},this.events()}events(){this.saveBtn.on("click",(t=>this.verifyLicense()))}verifyLicense(){this.removeStatusIndicators(),this.saveBtn.addClass("rmp-btn--processing");let t=this.input.val();this.data.action=this.updateAction,this.data.licenseKey=t,console.log(this.data),$.ajax({type:"POST",url:this.ajaxUrl,data:this.data,dataType:"JSON",success:t=>{console.log(t),this.afterSave(t)}})}afterSave(t){if(t.errorMsg.length)return this.msg.addClass(this.msgAlertClass),this.saveBtn.addClass(this.btnAlertClass),void this.msg.html(t.errorMsg.join("<br />"));this.msg.addClass(this.msgSuccessClass),this.saveBtn.addClass(this.btnSuccessClass),this.msg.text(t.successMsg),setTimeout((()=>{this.saveBtn.removeClass(this.btnProcessingClass),this.saveBtn.removeClass(this.btnSuccessClass),this.saveBtn.removeClass(this.btnAlertClass)}),2e3)}removeStatusIndicators(){this.msg.html(""),this.msg.removeClass("rmp-tab-content__action-msg--success rmp-tab-content__action-msg--alert"),this.saveBtn.removeClass(this.btnSuccessClass),this.saveBtn.removeClass(this.btnAlertClass)}}$(document).ready((()=>{new b;let t=$(".js-rmp-menu").length,C=$(".js-rmp-meta-box").length,y=$(".column-crw_shortcode").length,w=$(".js-rmp-customize-mb").length;t&&(new s,
new e(".js-rmp-save-options",".js-rmp-option","rmp_update_options",".js-rmp-options-msg",".js-rmp-reset-options","reset_options"),new e(".js-rmp-save-customization",".js-rmp-customization","update_customization",".js-rmp-customization-msg",".js-rmp-reset-customization","reset_customization"),new e(".js-rmp-save-security",".js-rmp-security","update_security",".js-rmp-security-msg",".js-rmp-reset-security","reset_security"),new i,new a,new n,new l("js-rmp-options-waypoint",".js-rmp-options-sticky"),new l("js-rmp-customization-waypoint",".js-rmp-customization-sticky"),new l("js-rmp-security-waypoint",".js-rmp-security-sticky"),new v,new f),C&&(new r,new o),w&&(new c,new d,new m,new p,new u,new g),y&&new h}))}(jQuery,rmp_options);